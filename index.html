<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Redirecting…</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent:#ff6b6b;
      --white:#ffffff;
    }
    html,body{height:100%;margin:0;font-family:Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{
      background: linear-gradient(180deg,#071025 0%, #0d1b2b 100%);
      color:var(--white);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .card{
      width:100%;
      max-width:920px;
      background:var(--card);
      border-radius:12px;
      box-shadow:0 8px 20px rgba(2,6,23,0.6);
      padding:18px;
    }
    h1{font-size:20px;margin:0 0 8px 0}
    p.lead{margin:0 0 16px 0;color:var(--muted)}
    .count{
      font-weight:700;color:var(--accent);font-size:20px;
    }
    .ads-grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:12px;
      align-items:start;
    }
    .ad-box{
      background:rgba(255,255,255,0.02);
      border-radius:8px;
      padding:8px;
      min-height:90px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    @media (max-width:700px){
      .ads-grid{grid-template-columns: 1fr;}
    }
    .progress-wrap{margin-top:14px;background:rgba(255,255,255,0.04);border-radius:999px;overflow:hidden;height:10px;}
    .progress{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#ff9d6b);transition:width 0.25s linear;}
    .meta{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:12px;}
    .small{font-size:13px;color:var(--muted)}
    .notice{margin-top:12px;font-size:13px;color:#cbd5e1}
  </style>
</head>
<body>
  <div class="card" role="main" aria-live="polite">
    <h1>Please wait — preparing your content</h1>
    <p class="lead">For a better experience, we show a short ad. You will be redirected automatically.</p>

    <div style="display:flex;align-items:center;gap:16px;">
      <div class="count" id="countDisplay">10s</div>
      <div style="flex:1">
        <div class="progress-wrap" aria-hidden="true">
          <div class="progress" id="progressBar"></div>
        </div>
      </div>
    </div>

    <div class="ads-grid" style="margin-top:18px;">
      <!-- Ad Slot 1 -->
      <div class="ad-box" id="adSlot1">
        <script type="text/javascript">
          atOptions = {
            'key' : '9a3d6b9a7e39bbdf97996c8f632d7307',
            'format' : 'iframe',
            'height' : 250,
            'width' : 300,
            'params' : {}
          };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/9a3d6b9a7e39bbdf97996c8f632d7307/invoke.js"></script>
      </div>

      <!-- Ad Slot 2 -->
      <div class="ad-box" id="adSlot2">
        <script type="text/javascript">
          atOptions = {
            'key' : '0dc39fcf5a51b8f5b9473304925acc62',
            'format' : 'iframe',
            'height' : 90,
            'width' : 728,
            'params' : {}
          };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/0dc39fcf5a51b8f5b9473304925acc62/invoke.js"></script>
      </div>

      <!-- Ad Slot 3 -->
      <div class="ad-box" id="adSlot3">
        <script type='text/javascript' src='//pl27311695.profitableratecpm.com/f9/2a/fd/f92afd02a2ae4f54c57614733ff761d7.js'></script>
      </div>

      <!-- Ad Slot 4 -->
      <div class="ad-box" id="adSlot4">
        <script type='text/javascript' src='//pl27335490.profitableratecpm.com/13/b4/b5/13b4b5996bdc3c320077ef755855b939.js'></script>
      </div>

      <!-- Ad Slot 5 -->
      <div class="ad-box" id="adSlot5">
        <script async="async" data-cfasync="false" src="//pl27335470.profitableratecpm.com/2530496bd56455006dd04ad7f48ada10/invoke.js"></script>
        <div id="container-2530496bd56455006dd04ad7f48ada10"></div>
      </div>

      <!-- Ad Slot 6 -->
      <div class="ad-box" id="adSlot6">
        <script type="text/javascript">
          atOptions = {
            'key' : '9a3d6b9a7e39bbdf97996c8f632d7307',
            'format' : 'iframe',
            'height' : 250,
            'width' : 300,
            'params' : {}
          };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/9a3d6b9a7e39bbdf97996c8f632d7307/invoke.js"></script>
      </div>
    </div>

    <div class="meta">
      <div class="small">Ads provided by network</div>
      <div class="small">Redirect will happen automatically</div>
    </div>

    <p class="notice">
      If nothing happens after the countdown, tap <a id="manualLink" href="#" style="color:#fff;text-decoration:underline">here</a>.
    </p>
  </div>

  <script>
    /********************************************
     * ⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇⬇
     * यहाँ अपने redirect link डालना है (नीचे "FALLBACK_TARGET" में)
     * Example: https://www.youtube.com/watch?v=abcd
     * ⚠ ध्यान रहे — यहाँ जो link डालोगे वही open होगा अगर query parameter से link नहीं भेजा गया है।
     ********************************************/
    const FALLBACK_TARGET = "https://www.facebook.com/61560478862203/posts/pfbid02vBVEYEAtW4h4LPjHMGDi4TLyvAMkUUS5cbw7Mxnkkn1bPiGssyvKHz5aYnBV7pATl/?mibextid=CDWPTG";  
    /********************************************/

    (function(){
      // अब countdown 10 सेकंड का होगा
      const COUNT_START = 10;  

      // 'to' query parameter से URL लेना (अगर हो)
      const params = new URLSearchParams(window.location.search);
      let target = params.get('to');

      try {
        if (target) {
          target = decodeURIComponent(target);
        } else {
          target = FALLBACK_TARGET;
        }
      } catch(e){
        target = FALLBACK_TARGET;
      }

      const display = document.getElementById('countDisplay');
      const progress = document.getElementById('progressBar');
      const manualLink = document.getElementById('manualLink');

      manualLink.href = target;

      let secondsLeft = COUNT_START;
      display.textContent = secondsLeft + "s";
      progress.style.width = "0%";

      const totalMs = COUNT_START * 1000;
      const start = Date.now();

      const step = setInterval(() => {
        const elapsed = Date.now() - start;
        const pct = Math.min(100, (elapsed / totalMs) * 100);
        progress.style.width = pct + "%";
      }, 250);

      const tick = setInterval(() => {
        secondsLeft--;
        display.textContent = secondsLeft + "s";
        if (secondsLeft <= 0) {
          clearInterval(tick);
          clearInterval(step);
          try {
            window.location.replace(target);
          } catch(err) {
            window.location.href = target;
          }
        }
      }, 1000);

      function isProbablySafeUrl(url){
        try {
          const u = new URL(url);
          return ['http:','https:'].includes(u.protocol);
        } catch(e){ return false; }
      }
      if (!isProbablySafeUrl(target)) {
        clearInterval(tick);
        clearInterval(step);
        display.textContent = "0s";
        alert("Invalid target URL. Redirect cancelled.");
      }

      window.addEventListener('keydown', function(e){
        if (e.key === 'Escape'){
          clearInterval(tick);
          clearInterval(step);
          display.textContent = "Cancelled";
        }
      });

    })();
  </script>
</body>
</html>
